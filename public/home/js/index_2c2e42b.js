!function(t){"use strict";window.CanvasLabel=function(i){t.extend(this,{num:1,imgUrl:"",urlArray:[],fontFamily:"Avenir Next ST",fontColor:"#fff",offsetY:0},i),this.supportCanvas()},t.extend(CanvasLabel.prototype,{supportCanvas:function(){return this.$el=t('<canvas id="canvas"></canvas>'),this.canvas=this.$el[0],this.canvas&&this.canvas.getContext&&window.URL?this.init():this.resoureImg(0,this.num)},init:function(){var i=new XMLHttpRequest;i.open("GET",this.imgUrl,!0),i.responseType="blob";var s=this;i.onload=function(){var i=window.URL.createObjectURL(this.response);s.imgBg=new Image,s.imgBg.setAttribute("crossOrigin","Anonymous"),s.imgBg.onload=function(){s.imgx=t(s.imgBg)[0].width,s.imgy=t(s.imgBg)[0].height,s.canvas.width=s.imgx,s.canvas.height=s.imgy,s.ctx=s.canvas.getContext("2d"),s.drawImg(0,s.num),URL.revokeObjectURL(i)},s.imgBg.src=i},i.send()},drawImg:function(t,i){if(!(this.canvas&&this.canvas.getContext&&window.URL))return this.resoureImg(t,i);for(var s=t;i>s;s++)this.ctx.drawImage(this.imgBg,0,0,this.imgx,this.imgy),this.ctx.fillStyle=this.fontColor,this.fontSize=this.fontSize||this.imgx/2,this.ctx.font=this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillText(s+1,this.imgx/2,this.imgx/2-this.offsetY),this.urlArray.push(this.canvas.toDataURL()),this.ctx.clearRect(0,0,this.imgx,this.imgy);this.callback(this.urlArray)},resoureImg:function(t,i){for(var s=t;i>s;s++)this.urlArray.push(this.imgUrl);this.callback(this.urlArray)}})}($);