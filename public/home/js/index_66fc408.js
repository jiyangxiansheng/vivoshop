!function(i){"use strict";window.PCPickerCity=function(t){i.extend(this,{speed:300},t),this.init()},i.extend(PCPickerCity.prototype,{init:function(){this.className={unset:"pc-picker-selected-unset",unfold:"pc-picker-unfold",active:"pc-picker-active"},this.$el=i('<div class="pc-picker">                        <p class="pc-picker-selected '+this.className.unset+'">请选择省市</p>                        <div class="pc-picker-wrapper">                            <ul class="pc-picker-pca">                                <li class="pc-picker-province normal-font">选择省</li>                                <li class="pc-picker-city normal-font"></li>                            </ul>                            <ul class="pc-picker-list"></ul>                        </div>                    </div>'),this.$selected=this.$el.find(".pc-picker-selected"),this.$wrapper=this.$el.find(".pc-picker-wrapper"),this.$category=this.$el.find(".pc-picker-pca"),this.$list=this.$el.find(".pc-picker-list"),this.addEventListener(),i.ajax({url:this.url||"/store/provinces",type:"post"}).done(function(t,s){if("success"===s){if(this.$el.appendTo(this.picker),this.address=t.data,i.isEmptyObject(this.address)||null===this.address||!this.address)return void(this.errorCallback&&this.errorCallback());this.addressList=t.data,this.province?this.address[this.province]&&-1!==this.address[this.province].indexOf(this.city)?this.setAddress(this.province,this.city):(this.$category.children().eq(0).trigger("click"),this.callback(this.province,this.city)):(this.province="北京市",this.city="北京市",this.$category.children().eq(0).trigger("click"),this.callback(this.province,this.city))}else this.errorCallback&&this.errorCallback()}.bind(this))},renderList:function(){var i,t=this.$category.find("."+this.className.active),s=t.text(),e="";switch(t.index()){case 0:i=Object.keys(this.address);break;case 1:i=this.address[this.$category.children().eq(0).text()]}i.forEach(function(i){e+='<li class="normal-font '+(i===s?this.className.active:"")+'" title="'+i+'">'+i+"</li> "},this),e+="<li></li> <li></li> <li></li>",this.$list.empty().html(e)},setAddress:function(i,t){this.$category.children().eq(0).trigger("click"),this.$list.children(":contains("+i+")").trigger("click"),this.$category.children().eq(1).trigger("click"),this.$list.children(":contains("+t+")").trigger("click")},getAddress:function(){return{province:this.province,city:this.city}},addEventListener:function(){this.$el.on("click",function(i){i.stopPropagation()}),this.$el.on("click",".pc-picker-pca li",function(t){var s=i(t.target);s.hasClass(this.className.active)||(s.addClass(this.className.active).siblings().removeClass(this.className.active),this.renderList())}.bind(this)).on("click",".pc-picker-list li",function(t){var s=i(t.target),e=this.$category.find("."+this.className.active);if(s.hasClass(this.className.active))1===e.index()&&this.callback&&this.callback(this.province,this.city);else switch(e.removeClass(this.className.active).text(s.text()).attr("title",s.text()).next().css("visibility","visible").addClass(this.className.active).attr("title","").nextAll().css("visibility","hidden"),e.index()){case 0:e.next().text("选择市"),this.renderList();break;case 1:this.province=this.$category.children().eq(0).text(),this.city=s.text(),e.addClass(this.className.active),s.addClass(this.className.active).siblings().removeClass(this.className.active),this.$selected.text(this.province+" "+this.city).attr("title",this.province+" "+this.city).removeClass(this.className.unset),this.callback&&this.callback(this.province,this.city)}}.bind(this))}})}($);